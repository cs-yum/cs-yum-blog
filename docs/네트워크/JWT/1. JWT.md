> JWT(JSON Web Token)는 JSON 형식으로 인코딩된 토큰이다. 웹 기반 애플리케이션 간에 정보를 안전하게 전달하기 위한 표준 방법 중 하나이며, 사용자와 리소스 서버 사이에서 인증 및 권한을 관리하기 위해 사용된다.

## 🧑🏻‍💻 JWT의 구조
---

> JWT 는 `.`으로 구분되는 3가지의 문자열로 구성되어 있다.

#### ✏️ Header
- 토큰의 종류와 해시 알고리즘 정보를 포함한다.

#### ✏️ Payload
- 클레임(claim)으로 불리는 정보를 포함한다. 클레임은 사용자 정보, 권한 및 기타 데이터를 담고 있으며, 세 가지 유형으로 나뉜다.
  - Registered Claims: 토큰의 표준 클레임(예: 발급자, 만료일, 발급일)
  - Public Claims: 사용자 정의 클레임으로, 충돌을 피하기 위해 URL 사용
  - Private Claims: 사용자 정의 클레임으로, 공개 및 비공개 모두 포함 가능

#### ✏️ Signature
- Header와 Payload의 정보를 조합하여 생성된 서명으로, 토큰의 무결성을 확인하는 데 사용된다.

<center>
    <img src="/img/네트워크/10-1-1.png" width="350" height="180" alt="JWT의 구조" />
</center>

## 🧑🏻‍💻 Access Token과 Refresh Token
---

> JWT는 해당 토큰이 어디에 저장되고 어떻게 관리되느냐에 따라 Access Token 과 Refresh Token으로 나뉘며, 웹 애플리케이션과 API 간의 사용자 인증 및 권한 관리를 향상시키는 중요한 역할을 한다.

### ✅ Access Token
- 사용자가 사용자 정보, API 엔드포인트 등의 보호된 리소스에 접근하는 데 사용된다.
- 인증 후 발급되며, 유효 기간이 짧다.

### ✅ Refresh Token
- Access Token 갱신을 위해 사용된다.
- 보통 사용자의 로그인 상태를 유지하는 데 활용되며, Access Token보다 긴 유효 기간을 가진다.
- 보통 데이터베이스에 유저 정보와 같이 저장된다.

## 🧑🏻‍💻 JWT 인증 과정
---

1. 사용자가 ID, PW를 입력하여 서버에 로그인 인증을 요청한다.
2. 서버에서 클라이언트로부터 인증 요청을 받으면 Header, PayLoad, Signature를 정의하고, Base64로 한 번 더 암호화하여 JWT를 생성한 후 이를 쿠키에 담아 클라이언트에게 발급한다.
3. 클라이언트는 서버로부터 받은 JWT를 로컬 스토리지, 쿠키 등의 저장소에 저장하며 API를 서버에 요청할때 Authorization header에 Access Token을 담아서 보낸다.
4. 서버는 클라이언트가 Header에 담아서 보낸 Access Token이 해당 서버에서 발행한 토큰인지 확인 과정을 거치며, 문제가 없다면 클라이언트의 요청에 응답한다.
5. 만일 Access Token의 시간이 만료되면 클라이언트는 Refresh Token을 이용해서
서버로부터 새로운 Access Token을 발급 받는다.

## 🧑🏻‍💻 JWT의 장단점
---

### ✅ 장점
- 서명된 토큰을 사용하여 변조가 어렵고 안전한 인증이 가능하다.
- 필요한 사용자 정보를 자체적으로 담고 있어 별도의 저장소를 필요로 하지 않는다.
- 클라이언트 인증 정보를 저장하는 세션과 다르게 서버는 무상태(StateLess)가 되어 서버 확장성이 뛰어나다.
- 토큰 기반으로 다른 로그인 시스템에 접근 및 권한 공유가 가능하다.
- 다양한 애플리케이션 및 플랫폼에서 사용 가능하다.

### ✅ 단점
- 정보가 많아질수록 토큰의 길이가 늘어나 네트워크에 부하를 줄 수 있다.
- payload 자체는 단순히 BASE64로 인코딩 된 것이므로 탈취 후 디코딩을 하면 데이터가 쉽게 노출된다.
- 클라이언트 측에서 토큰을 관리하고 저장하기 때문에 보안 문제가 발생할 수 있다.
- 토큰을 한 번 발급하면 변경할 수 없고, 만료 시간이 지나야 새로운 토큰을 받을 수 있다.
정보가 클라이언트 측에 저장되어 음.