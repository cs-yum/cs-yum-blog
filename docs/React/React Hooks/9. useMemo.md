## ğŸ§‘ğŸ»â€ğŸ’»Â useMemo

---

> `useMemo` ëŠ” ë¦¬ë Œë”ë§ ì‚¬ì´ì˜ ê³„ì‚° ê²°ê³¼ë¥¼ ìºì‹œ (memoization)í•  ìˆ˜ ìˆëŠ” React í›…ì´ë‹¤.

### âœ…Â useMemo ë¬¸ë²•

```tsx
const cachedValue = useMemo(calculateValue, dependencies)
```

- `calculateValue`ëŠ” ìºì‹œí•˜ë ¤ëŠ” ê°’ì„ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. ReactëŠ” ì´ˆê¸° ë Œë”ë§ ì¤‘ì— ì¸ìì—†ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê³  ìºì‹œí•œë‹¤. ì´í›„ ì˜ì¡´ì„±ì´ ë³€ê²½ë˜ë©´ `calculateValue`ë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•˜ì—¬ ìƒˆë¡œìš´ ê°’ì„ ìºì‹œí•œë‹¤.
- `dependencies`ëŠ” `calculateValue` ì½”ë“œ ë‚´ì—ì„œ ì°¸ì¡°ë˜ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ë“¤ì˜ ëª©ë¡ì´ë‹¤.

## ğŸ§‘ğŸ»â€ğŸ’»Â ì•Œê³  ê°€ê¸°

---

### âœ…Â useMemoë¥¼ ì™œ ì‚¬ìš©í• ê¹Œ?

- `useMemo`ëŠ” ê³„ì‚°ì´ ë§ê±°ë‚˜ ë¬´ê±°ìš´ í•¨ìˆ˜ì˜ ë°˜í™˜ â€˜ê°’â€™ì„ ê¸°ì–µí•˜ë„ë¡ ë„ì™€ì¤€ë‹¤. ì´ë¥¼ í†µí•´ ë™ì¼í•œ ê³„ì‚°ì„ ë°˜ë³µí•˜ì§€ ì•Šê³ , í•„ìš”í•œ ìºì‹œëœ ê°’ì„ ì‚¬ìš©í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ì¤„ì¼ ìˆ˜ ìˆì–´ì„œ ì„±ëŠ¥ì„ í–¥ìƒ ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì´ëŸ° ì¢…ë¥˜ì˜ ìºì‹œë¥¼ `memorization` ì´ë¼ê³  í•œë‹¤.

### âœ…Â `useMemo` ëŠ” **ì–¸ì œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ê°€?**

- ê³„ì‚°ì´ ëˆˆì— ë„ê²Œ ëŠë¦¬ë©´ì„œ ì˜ì¡´ì„±ì´ ê±°ì˜ ë³€í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì— ì‚¬ìš©í•˜ì.
- `useMemo`ëŠ” ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ì„œë§Œ ì‚¬ìš©í•´ì•¼í•œë‹¤. ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ State Hooks ë˜ëŠ” Ref Hooksê°€ ë” ì ì ˆí•  ìˆ˜ ìˆë‹¤.
- ì¸í„°ë ‰ì…˜ì´ ë§ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ” ì•±ì˜ ê²½ìš° ì¼ë°˜ì ìœ¼ë¡œ í•„ìš”í•˜ì§€ ì•Šë‹¤.

### âœ…Â `useMemo` ì™€ `React.memo` ì˜ ì°¨ì´ì ì€?

- useMemoëŠ” â€˜ê°’â€™ì„ ë©”ëª¨ì´ì œì´ì…˜í•˜ì—¬ ë¦¬ë Œë”ë§ì„ ìµœì í™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.
- React.memoëŠ” â€˜í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸â€™ë¥¼ ë©”ëª¨ì´ì œì´ì…˜í•˜ì—¬ ë Œë”ë§ì„ ìµœì í™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.

### âœ…Â ì£¼ì˜ ì‚¬í•­

- ë£¨í”„ ì•ˆì—ì„œ useMemoë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.
- ì–´ë–¤ `useMemo`ê°€ ë‹¤ë¥¸ `useMemo`ì˜ ì˜ì¡´ì„±ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤ë©´, ë‘ ë¡œì§ì„ í†µí•©í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

## ğŸ§‘ğŸ»â€ğŸ’»Â í™œìš© ë° ìƒê°í•  ê±°ë¦¬

---

### âœ…Â Reactê°€ ìºì‹œëœ ê°’ì„ íê¸°í•˜ëŠ” ê²½ìš°ëŠ” ì–¸ì œì¼ê¹Œ?

1. ReactëŠ” ê°œë°œ ì¤‘ì— ì»´í¬ë„ŒíŠ¸ íŒŒì¼ì„ ìˆ˜ì •í•˜ë©´ ìºì‹œëœ ê°’ì„ íê¸°í•œë‹¤. 
2. ê°œë°œ í™˜ê²½ ë° ìƒìš© í™˜ê²½ ëª¨ë‘ì—ì„œ, ì´ˆê¸° ë§ˆìš´íŠ¸ ì¤‘ì— ì»´í¬ë„ŒíŠ¸ê°€ ì¼ì‹œ ì¤‘ë‹¨(suspend)ë˜ë©´ ReactëŠ” ìºì‹œë¥¼ íê¸°í•œë‹¤.

- ReactëŠ” ì´ì™¸ íŠ¹ë³„í•œ ì´ìœ ê°€ ìˆì§€ ì•ŠëŠ” í•œ ìºì‹œëœ ê°’ì„ ìœ ì§€í•˜ë ¤ê³  í•œë‹¤.

### âœ…Â ë¹„ìš©ì´ ë§ì´ ë“œëŠ” ê³„ì‚°ì¸ì§€ ì•„ë‹Œì§€ íŒë‹¨í•˜ëŠ” ë°©ë²•

1. ì½”ë“œì— ì†Œìš”ëœ ì‹œê°„ì„ ì¸¡ì •í•œë‹¤.
    
    ```tsx
    console.time('filter array');
    const visibleTodos = filterTodos(todos, tab);
    console.timeEnd('filter array');
    ```
    
    â†’ ì†Œìš”ëœ ì‹œê°„ì´ ê¸¸ ë•Œ (ì˜ˆ: 1ms ì´ìƒ) í•´ë‹¹ ê³„ì‚°ì„ ë©”ëª¨í•´ ë‘ëŠ” ê²ƒì´ ì¢‹ë‹¤. 
    
2. `useMemo`ë¡œ ê°ì‹¼ í›„ ë‹¤ì‹œ ì†Œìš” ì‹œê°„ì„ ì¸¡ì •í•´ ë³¸ë‹¤.
    
    ```tsx
    console.time('filter array');
    const visibleTodos = useMemo(() => {
      return filterTodos(todos, tab);
    }, [todos, tab]);
    console.timeEnd('filter array');
    ```
    
    â†’ ì´ë•Œ `useMemo`ëŠ” ì²« ë²ˆì§¸ ë Œë”ë§ì„ ë¹ ë¥´ê²Œ ë§Œë“¤ì§€ëŠ” ì•ŠëŠ”ë‹¤. ì—…ë°ì´íŠ¸ ì‹œ ìµœì í™”ì—ë§Œ ë„ì›€ì´ ëœë‹¤.
    

âš ï¸Â ì°¸ê³  ì‚¬í•­

- ê°œë°œ ì¤‘ì— ì„±ëŠ¥ì„ ì¸¡ì •í•˜ëŠ” ê²ƒì€ ë°˜ë“œì‹œ ì •í™•í•œ ê²°ê³¼ë¥¼ ì œê³µí•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.
    
    â†’ ê°€ì¥ ì •í™•í•œ ì‹œê°„ ì¸¡ì •ì„ ìœ„í•´ì„œëŠ” ìƒìš© ì•±ì„ ë¹Œë“œí•˜ê³  ì‚¬ìš©ìê°€ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ê¸°ê¸°ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ì.
    
- ê°œë°œìì˜ ì»´í“¨í„°ê°€ ìœ ì €ì˜ ì»´í“¨í„°ë³´ë‹¤ ë¹ ë¥¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¸ìœ„ì ìœ¼ë¡œ ì†ë„ë¥¼ ëŠ¦ì¶° ì„±ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ì.
    
    â†’ Chromeì€ ì´ë¥¼ ìœ„í•œ CPU ì“°ë¡œí‹€ë§ ì˜µì…˜ì„ ì œê³µí•œë‹¤.
    
    â†’ ë˜í•œ [React ê°œë°œì ë„êµ¬ profiler](https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ëª¨í™”ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ íŒë‹¨í•  ìˆ˜ ìˆë‹¤.
    

### âœ…Â í•¨ìˆ˜ë¥¼ ìºì‹œí•˜ê³  ì‹¶ë‹¤ë©´?

```tsx
// useMemo
export default function Page({ productId, referrer }) {
  const handleSubmit = useMemo(() => {
    return (orderDetails) => {
      post('/product/' + productId + '/buy', {
        referrer,
        orderDetails
      });
    };
  }, [productId, referrer]);

  return <Form onSubmit={handleSubmit} />;
}

// useCallback
export default function Page({ productId, referrer }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails
    });
  }, [productId, referrer]);

  return <Form onSubmit={handleSubmit} />;
}
```

- `useMemo` ë¥¼ ì‚¬ìš©í•˜ë©´ ì¤‘ì²© í•¨ìˆ˜ë¥¼ ì¶”ê°€ë¡œ ì‘ì„±í•˜ê²Œ ëœë‹¤. ì´ëŸ´ í•„ìš” ì—†ì´ í•¨ìˆ˜ë¥¼ ìºì‹œí•  ë•ŒëŠ” `useMemo` ëŒ€ì‹  `useCallback`ìœ¼ë¡œ ê°ì‹¸ì. ê·¸ ì™¸ ë‹¤ë¥¸ ì´ì ì€ `useMemo`ì™€ ë™ì¼í•˜ë‹¤.